<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Collaborative Analysis of Spatiotemporal Data</title>

    <link rel="stylesheet" href="style.css"/>

    <script src="/npm/jquery/dist/jquery.min.js"></script>
    <link rel="stylesheet" href="/npm/jquery-contextmenu/dist/jquery.contextMenu.min.css"/>
    <link rel="stylesheet" href="/npm/font-awesome/css/font-awesome.min.css"/>
    <script src="/npm/jquery-contextmenu/dist/jquery.contextMenu.min.js"></script>
    <script src="http://d3js.org/d3.v4.min.js"></script>
  </head>
  <body>
    <div id = "mainGraph"></div>

    <div id = "PadModal" class = "modal"></div>

    <script src="/npm/requirejs/require.js"></script>

    <script>

        requirejs.config({
            baseUrl: '/i2g/'
        })


        require(["main", "color-scheme"], function(i2g, colorScheme) {

            var mainGraph = i2g({
                container: "#mainGraph",
                width: window.innerWidth - 20,
                height: window.innerHeight - 20,
                domain: [0, 1],
                data: {nodes: [], links: []},
                colorScheme: colorScheme
            });


            $(window).on('hashchange', function() {
                var dataset = window.location.hash;
                if(dataset) {
                    $.getJSON( dataset.slice(1) + '.json', function(data){
                        mainGraph.model.removeNodes({all: true});
                        mainGraph.view.update();
                        mainGraph.model.addNodes(data.nodes);
                        mainGraph.view.update();
                        mainGraph.model.addLinks(data.links);
                        mainGraph.view.update();
                    });
                }
            })

            $(window).trigger('hashchange');

            $(window).resize((d) => {
                var width1 = window.innerWidth - 20,
                    height1 = window.innerHeight - 20;

                mainGraph.updateScreen(width1, height1);
                mainGraph.update();

            });

        })


    </script>
  </body>
</html>
